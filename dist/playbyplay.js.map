{"version":3,"sources":["playbyplay.js"],"names":[],"mappings":"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","file":"playbyplay.js","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n    typeof define === 'function' && define.amd ? define(['exports'], factory) :\n    factory((global.playbyplay = {}))\n}(this, function (exports) {\n\n    const entities = {\n        '&': '&amp;',\n        '<': '&lt;',\n        '>': '&gt;',\n        '\"': '&quot;',\n        \"'\": '&#39;',\n        '/': '&#x2F;'\n    };\n\n    const escapeHTML = str => String(str).replace(/[&<>\"'\\/]/g, s => entities[s]);\n\n    const containerInnerHTML = runs =>\n    `<button class=\"playbyplay__hide\">&lt; Back</button>` +\n    `${runs.length ? runsHTML(runs) : 'History is empty.'}`;\n\n    const runsHTML = runs =>\n    `<button class=\"playbyplay__clear\">Clear</button>\n<table class=\"playbyplay__runs\">${runs.map(runHTML).join('')}</table>`;\n\n    const runHTML = (run, index) =>\n    `<tr class=\"playbyplay__run ${statusClass(run)}\">\n    <td class=\"playbyplay__run__col playbyplay__run__input\">\n        <pre><code>${escapeHTML(run.input)}</code></pre>\n    </td>\n    <td class=\"playbyplay__run__col playbyplay__run__output\">\n        <pre>${escapeHTML(run.output)}</pre>\n    </td>\n    <td class=\"playbyplay__run__col\">\n        <button class=\"playbyplay__run__restore\" data-index=\"${escapeHTML(index)}\">Restore</button>\n    </td>\n</tr>`;\n\n    const statusClass = run => run.status ? `playbyplay__run--${escapeHTML(run.status)}` : '';\n\n    const key = 'playbyplay_0fE#n9asNy4^MD1jfj&!';\n    const containerId = 'playbyplay';\n\n    function save(run, options, callback) {\n        setTimeout(() => {\n            localhistory.save(key, run, options, callback);\n        }, 0);\n    }\n\n    function show(callback) {\n        localhistory.load(key, (err, runs) => {\n            if (err) {\n                callback(err);\n                return;\n            }\n            showRuns(runs, callback);\n        });\n    }\n\n    function showRuns(runs, callback) {\n        hide();\n\n        const container = document.createElement('div');\n\n        container.id = containerId;\n        container.innerHTML = containerInnerHTML(runs);\n\n        container.addEventListener('click', e => {\n            switch (e && e.target && e.target.className) {\n                case 'playbyplay__hide':\n                    hide();\n                    callback(null);\n                    return;\n                case 'playbyplay__clear':\n                    hide();\n                    localhistory.clear(key, () => {\n                        show(callback);\n                    });\n                    return;\n                case 'playbyplay__run__restore':\n                    // Use getAttribute instead of dataset for compatibility:\n                    // http://caniuse.com/#feat=dataset\n                    const index = e.target.getAttribute('data-index');\n                    hide();\n                    callback(null, runs[index]);\n                    return;\n            }\n        }, false);\n\n        document.body.appendChild(container);\n    }\n\n    function hide() {\n        try {\n            const container = document.getElementById(containerId);\n            container.parentNode.removeChild(container);\n        } catch (e) { // eslint-disable-line no-empty\n        }\n    }\n\n    exports.save = save;\n    exports.show = show;\n\n}));\n"],"sourceRoot":"./"}