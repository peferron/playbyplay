{"version":3,"sources":["playbyplay.js","playbyplay.min.js"],"names":["global","factory","exports","module","define","amd","playbyplay","this","append","run","options","callback","cb","opts","filledAppendOptions","setTimeout","localhistory","key","optionsOrEmpty","hasOwnProperty","appendIfEqualToLast","show","filledShowOptions","load","err","runs","onShow","showRuns","parent","document","body","hide","reverse","container","createElement","id","containerId","innerHTML","containerInnerHTML","addEventListener","e","target","className","clear","index","getAttribute","appendChild","getElementById","parentNode","removeChild","escapeClass","str","String","replace","escapeHTML","div","createTextNode","emptyHTML","statusClass","status","runHTML","input","output","runsHTML","map","join","length","supported"],"mappings":"CACC,SAAUA,EAAQC,GACI,gBAAZC,UAA0C,mBAAXC,QAAyBF,EAAQC,SACrD,kBAAXE,SAAyBA,OAAOC,IAAMD,QAAQ,WAAYH,GACjEA,EAASD,EAAOM,gBAClBC,KAAM,SAAUL,GA8Cd,QAASM,GAAOC,EAAKC,EAASC,GAC1B,GAAMC,GAAwB,kBAAZF,GAAyBA,EAAUC,EAC/CE,EAAOC,EAAoBJ,EAEjCK,YAAW,WACPC,aAAaR,OAAOS,EAAKR,EAAKI,EAAMD,IACrC,GAGP,QAASE,GAAoBJ,GACzB,GAAMG,GAAOK,EAAeR,EAM5B,OAJKG,GAAKM,eAAe,yBACrBN,EAAKO,qBAAsB,GAGxBP,EAKX,QAASQ,GAAKX,EAASC,GACnB,GAAMC,GAAwB,kBAAZF,GAAyBA,EAAUC,EAC/CE,EAAOS,EAAkBZ,EAE/BM,cAAaO,KAAKN,EAAK,SAACO,EAAKC,GACzB,MAAID,QACIX,EAAKa,QACLb,EAAKa,OAAOF,QAIpBG,GAASF,EAAMZ,EAAMD,KAI7B,QAASU,GAAkBZ,GACvB,GAAMG,GAAOK,EAAeR,EAM5B,OAJKG,GAAKe,SACNf,EAAKe,OAASC,SAASC,MAGpBjB,EAGX,QAASc,GAASF,EAAMf,EAASC,GAC7BoB,IAGAN,EAAKO,SAEL,IAAMC,GAAYJ,SAASK,cAAc,MAEzCD,GAAUE,GAAKC,EACfH,EAAUI,UAAYC,EAAmBb,GAEzCQ,EAAUM,iBAAiB,QAAS,SAAAC,GAChC,OAAQA,GAAKA,EAAEC,QAAUD,EAAEC,OAAOC,WAC9B,IAAK,oCAGD,MAFAX,SACApB,GAAS,KAGb,KAAK,qCAKD,MAJAoB,SACAY,GAAM,WACFtB,EAAKV,IAIb,KAAK,uCAGD,GAAMiC,GAAQJ,EAAEC,OAAOI,aAAa,aAGpC,OAFAd,SACApB,GAAS,KAAMc,EAAKmB,OAG7B,EAEH,IAAIpB,GAAM,IACV,KACId,EAAQkB,OAAOkB,YAAYb,GAC7B,MAAOO,GACLhB,EAAMgB,EAGN9B,EAAQgB,QACRhB,EAAQgB,OAAOF,GAIvB,QAASO,KACL,IACI,GAAME,GAAYJ,SAASkB,eAAeX,EAC1CH,GAAUe,WAAWC,YAAYhB,GACnC,MAAOO,KAGb,QAASG,GAAMhC,GACXK,aAAa2B,MAAM1B,EAAKN,GAjJ5B,GAAMuC,GAAc,SAAAC,GCDhB,MDCuBC,QAAOD,GAAKE,QAAQ,aAAc,KAEvDC,EAAa,SAAAH,GACf,GAAMI,GAAM1B,SAASK,cAAc,MAEnC,OADAqB,GAAIT,YAAYjB,SAAS2B,eAAeL,IACjCI,EAAIlB,WAGToB,EAAS,0DAETC,EAAc,SAAAjD,GCChB,MDDuBA,GAAIkD,OAAM,qBAAwBT,EAAYzC,EAAIkD,QAAY,IAEnFC,EAAU,SAACnD,EAAKmC,GCGlB,MAAO,6BDFkBc,EAAYjD,GAAI,mGAEL6C,EAAW7C,EAAIoD,OAAM,oHAG3BP,EAAW7C,EAAIqD,QAAO,gIAGelB,EAAK,gEAMtEmB,EAAW,SAAAtC,GCRb,MAAO,2GDWTA,EAAKuC,IAAIJ,GAASK,KAAK,IAAG,cAGtB3B,EAAqB,SAAAb,GCVvB,MDWJ,wEACGA,EAAKyC,OAASH,EAAStC,GAAQgC,IAE5BxC,EAAM,kCACNmB,EAAc,aAEdlB,EAAiB,SAAAR,GCVnB,MDU8BA,IAA8B,gBAAZA,GAAuBA,MAErEyD,EAAYnD,aAAamD,SA0G/BjE,GAAQiE,UAAYA,EACpBjE,EAAQM,OAASA,EACjBN,EAAQmB,KAAOA,EACfnB,EAAQyC,MAAQA","file":"playbyplay.min.js","sourcesContent":["/* playbyplay v2.1.0 | https://github.com/peferron/playbyplay | License: MIT */\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n    typeof define === 'function' && define.amd ? define(['exports'], factory) :\n    factory((global.playbyplay = {}))\n}(this, function (exports) {\n\n    const escapeClass = str => String(str).replace(/[^a-z0-9]/g, '');\n\n    const escapeHTML = str => {\n        const div = document.createElement('div');\n        div.appendChild(document.createTextNode(str));\n        return div.innerHTML;\n    };\n\n    const emptyHTML = `<span class=\"playbyplay-empty\">History is empty.</span>`;\n\n    const statusClass = run => run.status ? `playbyplay-status-${escapeClass(run.status)}` : '';\n\n    const runHTML = (run, index) =>\n    `<tr class=\"playbyplay-run ${statusClass(run)}\">\n    <td class=\"playbyplay-col playbyplay-input\">\n        <pre class=\"playbyplay-pre\"><code>${escapeHTML(run.input)}</code></pre>\n    </td>\n    <td class=\"playbyplay-col playbyplay-output\">\n        <pre class=\"playbyplay-pre\">${escapeHTML(run.output)}</pre>\n    </td>\n    <td class=\"playbyplay-col\">\n        <button class=\"playbyplay-button playbyplay-restore\" data-index=\"${index}\">\n            Restore\n        </button>\n    </td>\n</tr>`;\n\n    const runsHTML = runs =>\n    `<button class=\"playbyplay-button playbyplay-clear\">Clear</button>\n<table class=\"playbyplay-runs\">\n    ${runs.map(runHTML).join('')}\n</table>`;\n\n    const containerInnerHTML = runs =>\n    `<button class=\"playbyplay-button playbyplay-hide\">&lt; Back</button>` +\n    `${runs.length ? runsHTML(runs) : emptyHTML}`;\n\n    const key = 'playbyplay_0fE#n9asNy4^MD1jfj&!';\n    const containerId = 'playbyplay';\n\n    const optionsOrEmpty = options => options && typeof options === 'object' ? options : {};\n\n    const supported = localhistory.supported;\n\n    function append(run, options, callback) {\n        const cb = typeof options === 'function' ? options : callback;\n        const opts = filledAppendOptions(options);\n\n        setTimeout(() => {\n            localhistory.append(key, run, opts, cb);\n        }, 0);\n    }\n\n    function filledAppendOptions(options) {\n        const opts = optionsOrEmpty(options);\n\n        if (!opts.hasOwnProperty('appendIfEqualToLast')) {\n            opts.appendIfEqualToLast = false;\n        }\n\n        return opts;\n    }\n\n    // options is optional, callback is required. Usually, required arguments go first, but having the\n    // callback last leads to cleaner calling code with closures.\n    function show(options, callback) {\n        const cb = typeof options === 'function' ? options : callback;\n        const opts = filledShowOptions(options);\n\n        localhistory.load(key, (err, runs) => {\n            if (err) {\n                if (opts.onShow) {\n                    opts.onShow(err);\n                }\n                return;\n            }\n            showRuns(runs, opts, cb);\n        });\n    }\n\n    function filledShowOptions(options) {\n        const opts = optionsOrEmpty(options);\n\n        if (!opts.parent) {\n            opts.parent = document.body;\n        }\n\n        return opts;\n    }\n\n    function showRuns(runs, options, callback) {\n        hide();\n\n        // The most recently appended runs should be on top.\n        runs.reverse();\n\n        const container = document.createElement('div');\n\n        container.id = containerId;\n        container.innerHTML = containerInnerHTML(runs);\n\n        container.addEventListener('click', e => {\n            switch (e && e.target && e.target.className) {\n                case 'playbyplay-button playbyplay-hide':\n                    hide();\n                    callback(null);\n                    return;\n\n                case 'playbyplay-button playbyplay-clear':\n                    hide();\n                    clear(() => {\n                        show(callback);\n                    });\n                    return;\n\n                case 'playbyplay-button playbyplay-restore':\n                    // Use getAttribute instead of dataset for compatibility:\n                    // http://caniuse.com/#feat=dataset\n                    const index = e.target.getAttribute('data-index');\n                    hide();\n                    callback(null, runs[index]);\n                    return;\n            }\n        }, false);\n\n        let err = null;\n        try {\n            options.parent.appendChild(container);\n        } catch (e) {\n            err = e;\n        }\n\n        if (options.onShow) {\n            options.onShow(err);\n        }\n    }\n\n    function hide() {\n        try {\n            const container = document.getElementById(containerId);\n            container.parentNode.removeChild(container);\n        } catch (e) {}\n    }\n\n    function clear(callback) {\n        localhistory.clear(key, callback);\n    }\n\n    exports.supported = supported;\n    exports.append = append;\n    exports.show = show;\n    exports.clear = clear;\n\n}));\n","/* playbyplay v2.0.0 | https://github.com/peferron/playbyplay | License: MIT */\n!function(t,n){\"object\"==typeof exports&&\"undefined\"!=typeof module?n(exports):\"function\"==typeof define&&define.amd?define([\"exports\"],n):n(t.playbyplay={})}(this,function(t){function n(t,n,e){var l=\"function\"==typeof n?n:e,p=a(n);setTimeout(function(){localhistory.append(f,t,p,l)},0)}function a(t){var n=v(t);return n.hasOwnProperty(\"appendIfEqualToLast\")||(n.appendIfEqualToLast=!1),n}function e(t,n){var a=\"function\"==typeof t?t:n,e=l(t);localhistory.load(f,function(t,n){return t?void(e.onShow&&e.onShow(t)):void p(n,e,a)})}function l(t){var n=v(t);return n.parent||(n.parent=document.body),n}function p(t,n,a){o(),t.reverse();var l=document.createElement(\"div\");l.id=h,l.innerHTML=b(t),l.addEventListener(\"click\",function(n){switch(n&&n.target&&n.target.className){case\"playbyplay-button playbyplay-hide\":return o(),void a(null);case\"playbyplay-button playbyplay-clear\":return o(),void y(function(){e(a)});case\"playbyplay-button playbyplay-restore\":var l=n.target.getAttribute(\"data-index\");return o(),void a(null,t[l])}},!1);var p=null;try{n.parent.appendChild(l)}catch(r){p=r}n.onShow&&n.onShow(p)}function o(){try{var t=document.getElementById(h);t.parentNode.removeChild(t)}catch(n){}}function y(t){localhistory.clear(f,t)}var r=function(t){return String(t).replace(/[^a-z0-9]/g,\"\")},u=function(t){var n=document.createElement(\"div\");return n.appendChild(document.createTextNode(t)),n.innerHTML},c='<span class=\"playbyplay-empty\">History is empty.</span>',i=function(t){return t.status?\"playbyplay-status-\"+r(t.status):\"\"},s=function(t,n){return'<tr class=\"playbyplay-run '+i(t)+'\">\\n    <td class=\"playbyplay-col playbyplay-input\">\\n        <pre class=\"playbyplay-pre\"><code>'+u(t.input)+'</code></pre>\\n    </td>\\n    <td class=\"playbyplay-col playbyplay-output\">\\n        <pre class=\"playbyplay-pre\">'+u(t.output)+'</pre>\\n    </td>\\n    <td class=\"playbyplay-col\">\\n        <button class=\"playbyplay-button playbyplay-restore\" data-index=\"'+n+'\">\\n            Restore\\n        </button>\\n    </td>\\n</tr>'},d=function(t){return'<button class=\"playbyplay-button playbyplay-clear\">Clear</button>\\n<table class=\"playbyplay-runs\">\\n    '+t.map(s).join(\"\")+\"\\n</table>\"},b=function(t){return'<button class=\"playbyplay-button playbyplay-hide\">&lt; Back</button>'+(t.length?d(t):c)},f=\"playbyplay_0fE#n9asNy4^MD1jfj&!\",h=\"playbyplay\",v=function(t){return t&&\"object\"==typeof t?t:{}},m=localhistory.supported;t.supported=m,t.append=n,t.show=e,t.clear=y});\n//# sourceMappingURL=playbyplay.min.js.map"],"sourceRoot":"/source/"}