{"version":3,"sources":["playbyplay.js","playbyplay.min.js"],"names":["global","factory","exports","module","define","amd","playbyplay","this","save","run","options","callback","setTimeout","localhistory","key","show","load","err","runs","showRuns","hide","container","document","createElement","id","containerId","innerHTML","containerInnerHTML","addEventListener","e","target","className","clear","index","getAttribute","body","appendChild","getElementById","parentNode","removeChild","entities","&","<",">","\"","'","/","escapeHTML","str","String","replace","s","length","runsHTML","map","runHTML","join","statusClass","input","output","status"],"mappings":"CAAC,SAAUA,EAAQC,GACI,gBAAZC,UAA0C,mBAAXC,QAAyBF,EAAQC,SACrD,kBAAXE,SAAyBA,OAAOC,IAAMD,QAAQ,WAAYH,GACjEA,EAASD,EAAOM,gBAClBC,KAAM,SAAUL,GAuCd,QAASM,GAAKC,EAAKC,EAASC,GACxBC,WAAW,WACPC,aAAaL,KAAKM,EAAKL,EAAKC,EAASC,IACtC,GAGP,QAASI,GAAKJ,GACVE,aAAaG,KAAKF,EAAK,SAACG,EAAKC,GACzB,MAAID,OACAN,GAASM,OAGbE,GAASD,EAAMP,KAIvB,QAASQ,GAASD,EAAMP,GACpBS,GAEA,IAAMC,GAAYC,SAASC,cAAc,MAEzCF,GAAUG,GAAKC,EACfJ,EAAUK,UAAYC,EAAmBT,GAEzCG,EAAUO,iBAAiB,QAAS,SAAAC,GAChC,OAAQA,GAAKA,EAAEC,QAAUD,EAAEC,OAAOC,WAC9B,IAAK,mBAGD,MAFAX,SACAT,GAAS,KAEb,KAAK,oBAKD,MAJAS,SACAP,cAAamB,MAAMlB,EAAK,WACpBC,EAAKJ,IAGb,KAAK,2BAGD,GAAMsB,GAAQJ,EAAEC,OAAOI,aAAa,aAGpC,OAFAd,SACAT,GAAS,KAAMO,EAAKe,OAG7B,GAEHX,SAASa,KAAKC,YAAYf,GAG9B,QAASD,KACL,IACI,GAAMC,GAAYC,SAASe,eAAeZ,EAC1CJ,GAAUiB,WAAWC,YAAYlB,GACnC,MAAOQ,KA1Fb,GAAMW,IACFC,IAAK,QACLC,IAAK,OACLC,IAAK,OACLC,IAAK,SACLC,IAAK,QACLC,IAAK,UAGHC,EAAa,SAAAC,GCDf,MDCsBC,QAAOD,GAAKE,QAAQ,aAAc,SAAAC,GCApD,MDAyDX,GAASW,MAEpExB,EAAqB,SAAAT,GCGvB,MDFJ,uDACGA,EAAKkC,OAASC,EAASnC,GAAQ,sBAE5BmC,EAAW,SAAAnC,GCGb,MAAO,qFDDmBA,EAAKoC,IAAIC,GAASC,KAAK,IAAG,YAElDD,EAAU,SAAC9C,EAAKwB,GCGlB,MAAO,8BDFmBwB,EAAYhD,GAAI,wFAE7BsC,EAAWtC,EAAIiD,OAAM,yGAG3BX,EAAWtC,EAAIkD,QAAO,0HAG0BZ,EAAWd,GAAM,wCAItEwB,EAAc,SAAAhD,GCNhB,MDMuBA,GAAImD,OAAM,oBAAuBb,EAAWtC,EAAImD,QAAY,IAEjF9C,EAAM,kCACNW,EAAc,YA2DpBvB,GAAQM,KAAOA,EACfN,EAAQa,KAAOA","file":"playbyplay.min.js","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n    typeof define === 'function' && define.amd ? define(['exports'], factory) :\n    factory((global.playbyplay = {}))\n}(this, function (exports) {\n\n    const entities = {\n        '&': '&amp;',\n        '<': '&lt;',\n        '>': '&gt;',\n        '\"': '&quot;',\n        \"'\": '&#39;',\n        '/': '&#x2F;'\n    };\n\n    const escapeHTML = str => String(str).replace(/[&<>\"'\\/]/g, s => entities[s]);\n\n    const containerInnerHTML = runs =>\n    `<button class=\"playbyplay__hide\">&lt; Back</button>` +\n    `${runs.length ? runsHTML(runs) : 'History is empty.'}`;\n\n    const runsHTML = runs =>\n    `<button class=\"playbyplay__clear\">Clear</button>\n<table class=\"playbyplay__runs\">${runs.map(runHTML).join('')}</table>`;\n\n    const runHTML = (run, index) =>\n    `<tr class=\"playbyplay__run ${statusClass(run)}\">\n    <td class=\"playbyplay__run__col playbyplay__run__input\">\n        <pre><code>${escapeHTML(run.input)}</code></pre>\n    </td>\n    <td class=\"playbyplay__run__col playbyplay__run__output\">\n        <pre>${escapeHTML(run.output)}</pre>\n    </td>\n    <td class=\"playbyplay__run__col\">\n        <button class=\"playbyplay__run__restore\" data-index=\"${escapeHTML(index)}\">Restore</button>\n    </td>\n</tr>`;\n\n    const statusClass = run => run.status ? `playbyplay__run--${escapeHTML(run.status)}` : '';\n\n    const key = 'playbyplay_0fE#n9asNy4^MD1jfj&!';\n    const containerId = 'playbyplay';\n\n    function save(run, options, callback) {\n        setTimeout(() => {\n            localhistory.save(key, run, options, callback);\n        }, 0);\n    }\n\n    function show(callback) {\n        localhistory.load(key, (err, runs) => {\n            if (err) {\n                callback(err);\n                return;\n            }\n            showRuns(runs, callback);\n        });\n    }\n\n    function showRuns(runs, callback) {\n        hide();\n\n        const container = document.createElement('div');\n\n        container.id = containerId;\n        container.innerHTML = containerInnerHTML(runs);\n\n        container.addEventListener('click', e => {\n            switch (e && e.target && e.target.className) {\n                case 'playbyplay__hide':\n                    hide();\n                    callback(null);\n                    return;\n                case 'playbyplay__clear':\n                    hide();\n                    localhistory.clear(key, () => {\n                        show(callback);\n                    });\n                    return;\n                case 'playbyplay__run__restore':\n                    // Use getAttribute instead of dataset for compatibility:\n                    // http://caniuse.com/#feat=dataset\n                    const index = e.target.getAttribute('data-index');\n                    hide();\n                    callback(null, runs[index]);\n                    return;\n            }\n        }, false);\n\n        document.body.appendChild(container);\n    }\n\n    function hide() {\n        try {\n            const container = document.getElementById(containerId);\n            container.parentNode.removeChild(container);\n        } catch (e) { // eslint-disable-line no-empty\n        }\n    }\n\n    exports.save = save;\n    exports.show = show;\n\n}));\n","!function(t,n){\"object\"==typeof exports&&\"undefined\"!=typeof module?n(exports):\"function\"==typeof define&&define.amd?define([\"exports\"],n):n(t.playbyplay={})}(this,function(t){function n(t,n,e){setTimeout(function(){localhistory.save(i,t,n,e)},0)}function e(t){localhistory.load(i,function(n,e){return n?void t(n):void a(e,t)})}function a(t,n){l();var a=document.createElement(\"div\");a.id=s,a.innerHTML=y(t),a.addEventListener(\"click\",function(a){switch(a&&a.target&&a.target.className){case\"playbyplay__hide\":return l(),void n(null);case\"playbyplay__clear\":return l(),void localhistory.clear(i,function(){e(n)});case\"playbyplay__run__restore\":var r=a.target.getAttribute(\"data-index\");return l(),void n(null,t[r])}},!1),document.body.appendChild(a)}function l(){try{var t=document.getElementById(s);t.parentNode.removeChild(t)}catch(n){}}var r={\"&\":\"&amp;\",\"<\":\"&lt;\",\">\":\"&gt;\",'\"':\"&quot;\",\"'\":\"&#39;\",\"/\":\"&#x2F;\"},o=function(t){return String(t).replace(/[&<>\"'\\/]/g,function(t){return r[t]})},y=function(t){return'<button class=\"playbyplay__hide\">&lt; Back</button>'+(t.length?u(t):\"History is empty.\")},u=function(t){return'<button class=\"playbyplay__clear\">Clear</button>\\n<table class=\"playbyplay__runs\">'+t.map(p).join(\"\")+\"</table>\"},p=function(t,n){return'<tr class=\"playbyplay__run '+c(t)+'\">\\n    <td class=\"playbyplay__run__col playbyplay__run__input\">\\n        <pre><code>'+o(t.input)+'</code></pre>\\n    </td>\\n    <td class=\"playbyplay__run__col playbyplay__run__output\">\\n        <pre>'+o(t.output)+'</pre>\\n    </td>\\n    <td class=\"playbyplay__run__col\">\\n        <button class=\"playbyplay__run__restore\" data-index=\"'+o(n)+'\">Restore</button>\\n    </td>\\n</tr>'},c=function(t){return t.status?\"playbyplay__run--\"+o(t.status):\"\"},i=\"playbyplay_0fE#n9asNy4^MD1jfj&!\",s=\"playbyplay\";t.save=n,t.show=e});\n//# sourceMappingURL=playbyplay.min.js.map"],"sourceRoot":"/source/"}